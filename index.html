<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz App</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

  <section id="view-home" class="view active">
    <div class="container-narrow">
      <header class="home-header">
        <h1>Quiz Note</h1>
        <p class="sub">学習ドリルアプリ</p>
      </header>

      <div class="menu-card">
        <label>ドリルを選択</label>
        <select id="quizSelect" class="big-select">
          <option value="">読み込み中…</option>
        </select>
        
        <div class="or-text">- OR -</div>

        <div class="url-input-group">
          <input id="quizUrlInput" type="url" placeholder="https://.../quiz.json" />
          <button id="btnLoadUrl">URL読込</button>
        </div>
      </div>

      <div class="menu-actions">
        <button id="btnToAnalysis" class="btn-outline">📊 学習データの分析・履歴を見る</button>
      </div>
    </div>
  </section>

  <section id="view-quiz" class="view">
    <header class="sticky-header">
      <button id="btnQuitQuiz" class="btn-text">← 中断して戻る</button>
      <span id="quizTitleDisplay" class="header-title">Quiz Title</span>
    </header>

    <div class="container-max">
      <div id="quizAppBody">
        </div>

      <div class="action-area">
        <button id="btnGrade" class="btn-primary-large">採点する</button>
      </div>
    </div>
  </section>

  <section id="view-result" class="view">
    <div class="container-max">
      <div class="result-summary">
        <h2>採点結果</h2>
        <div class="score-display">
          <span id="scoreText">--%</span>
        </div>
        <div id="resultMessage" class="result-msg"></div>
        
        <div class="result-buttons">
          <button id="btnRetryMissed" class="btn-accent" style="display:none;">間違えた問題だけ解き直す</button>
          <button id="btnBackToHomeFromResult" class="btn-secondary">メニューに戻る</button>
        </div>
      </div>

      <div id="resultDetails" class="result-details">
        </div>
    </div>
  </section>

  <section id="view-analysis" class="view">
    <header class="sticky-header">
      <button id="btnBackToHomeFromAnalysis" class="btn-text">← メニューに戻る</button>
      <span class="header-title">学習データ</span>
    </header>

    <div class="container-narrow">
      <div class="panel">
        <h3>弱点・傾向</h3>
        <div id="insightsContent" class="small">データ集計中...</div>
        <div style="text-align:right; margin-top:8px;">
          <button id="btnRefreshInsights" class="btn-small">更新</button>
        </div>
      </div>

      <div class="panel">
        <h3>復習おすすめ (Due)</h3>
        <div id="recommendationsContent" class="small"></div>
      </div>

      <div class="panel">
        <div style="display:flex; justify-content:space-between;">
          <h3>最近の履歴</h3>
          <button id="btnClearHistory" class="btn-danger-text">履歴消去</button>
        </div>
        <div id="historyListContent" class="history-list"></div>
      </div>
    </div>
  </section>

  <div style="display:none;">
    <input type="checkbox" id="toggleAnswers" />
  </div>

  <script src="./study_engine.js"></script>
  <script src="./app.js"></script>
</body>
</html>
