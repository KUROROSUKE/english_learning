<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz App</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="top">
    <div>
      <h1 id="appTitle">Quiz App</h1>
      <div class="meta" id="appMeta"></div>
    </div>
    <div class="topActions">
      <button id="btnGrade">採点</button>
      <button id="btnReset">リセット</button>
      <label class="toggle">
        <input type="checkbox" id="toggleAnswers" />
        正解・解説表示
      </label>
    </div>
  </header>

  <section class="panel">
    <div class="row">
      <div class="field">
        <label>クイズ一覧</label>
        <select id="quizSelect">
          <option value="">読み込み中…</option>
        </select>
      </div>

      <div class="field grow">
        <label>クイズURL（直指定）</label>
        <input id="quizUrlInput" type="url" placeholder="https://.../quiz.json  例: GitHub Pages上のJSON URL" />
      </div>

      <div class="field">
        <label>&nbsp;</label>
        <button id="btnLoadUrl">URLを読み込む</button>
      </div>
    </div>

    <div class="small">
      URLパラメータ対応：
      <code>?quiz=QUIZ_JSON_URL</code>
      / <code>?index=INDEX_JSON_URL</code>
    </div>
  </section>

  <section class="panel" id="historyPanel">
  <div class="row">
    <div class="field grow">
      <label>履歴</label>
      <div class="small">採点結果を端末に保存します（IndexedDB）。</div>
    </div>
    <div class="field">
      <label>&nbsp;</label>
      <button id="btnRefreshHistory">履歴更新</button>
    </div>
    <div class="field">
      <label>&nbsp;</label>
      <button id="btnClearHistory">履歴を全削除</button>
    </div>
  </div>

  <div id="historyList" class="small" style="margin-top:10px;">
    Loading history…
  </div>
</section>

  <section class="panel" id="insightsPanel">
  <div class="row">
    <div class="field grow">
      <label>弱点分析・おすすめ（忘却曲線ベース）</label>
      <div class="small">設問ごとに次回の推奨タイミング（due）を計算し、今日やるべき問題を提示します。</div>
    </div>
    <div class="field">
      <label>&nbsp;</label>
      <button id="btnRefreshInsights">更新</button>
    </div>
    <div class="field">
      <label>&nbsp;</label>
      <button id="btnStartDueSession">今日のおすすめだけ表示</button>
    </div>
  </div>

  <div id="insightsBox" class="small" style="margin-top:10px;">Loading…</div>
</section>


  <main id="app" class="app">
    <div class="card">Loading…</div>
  </main>

  <footer class="footer">
    GitHub Pages で動作する想定。ローカル（file://）直開きは fetch が制限される場合があります。
  </footer>

  <script src="./app.js"></script>
</body>
</html>
